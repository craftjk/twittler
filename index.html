<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <title>literally twittler</title>
    <link rel="stylesheet" href="bootstrap.css"  type="text/css"/>
  </head>
  <body>
    <script>

      $(document).ready(function(event){
        var $content = $('.content');
				var $button = $('<input type="button" name="submit" value="Show new tweets">');
				var $tweets = $('<div class="tweets"></div>');
				$content.html($tweets);
				$content.append($button);

        var index = streams.home.length - 1;
        while(index > 0){
          var tweet = streams.home[index];
          var $tweet = $('<div class="tweet"></div>');
          var $user = $('<span class="user"></span>');
	        $user.text('@' + tweet.user);
					var elapsed = new Date(Date.now() - tweet.created_at);
					var timestamp = tweet.created_at;
          $tweet.append(timestamp + ' ');
					$tweet.append($user);
					$tweet.append(': ' + tweet.message);
	        $tweet.appendTo($tweets);
          index -= 1;
        }

				$button.click(function(event) {
					$tweets.html('');
	        for (var i = streams.home.length - 1 ; i > streams.home.length - 11 ; i--) {
	          var tweet = streams.home[i];
	          var $tweet = $('<div class="tweet"></div>');
	          var $user = $('<span class="user"></span>');
	          $user.text('@' + tweet.user);
						var elapsed = new Date(Date.now() - tweet.created_at);
						var timestamp = tweet.created_at;
						$tweet.append(timestamp + ' ');
						$tweet.append($user);
						$tweet.append(': ' + tweet.message);
	          $tweet.appendTo($tweets);
	        }
	        $('.tweet .user').click(function(event) {
	        	var clickedName = this.innerHTML.slice(1);
	        	$tweets.html('');
	        	for (var i = streams.home.length - 1; i > 0; i--) {
	        		var tweet = streams.home[i];
	        		var $tweet = $('<div class="tweet"></div>');
	        		if (tweet.user === clickedName) {
	        			var $tweet = $('<div class="tweet"></div>');
	        			var $user = $('<span class="user"></span>');
		            $user.text('@' + tweet.user);
			  				var elapsed = new Date(Date.now() - tweet.created_at);
				  			var timestamp = tweet.created_at;
					  		$tweet.append(timestamp + ' ');
						  	$tweet.append($user);
							  $tweet.append(': ' + tweet.message);
		            $tweet.appendTo($tweets);
	        		}
	        	}
	        });
				});

        $('.tweet .user').click(function(event) {
        	var clickedName = this.innerHTML.slice(1);
        	$tweets.html('');
        	for (var i = streams.home.length - 1; i > 0; i--) {
        		var tweet = streams.home[i];
        		var $tweet = $('<div class="tweet"></div>');
        		if (tweet.user === clickedName) {
        			var $tweet = $('<div class="tweet"></div>');
        			var $user = $('<span class="user"></span>');
	            $user.text('@' + tweet.user);
		  				var elapsed = new Date(Date.now() - tweet.created_at);
			  			var timestamp = tweet.created_at;
				  		$tweet.append(timestamp + ' ');
					  	$tweet.append($user);
						  $tweet.append(': ' + tweet.message);
	            $tweet.appendTo($tweets);
        		}
        	}
        });
      });

    </script>

    <div class="container">
    	<div class="header">
    		<h1>literally twittler</h1>
    	</div>
    	<div class="content"></div>
    </div>
  </body>
</html>